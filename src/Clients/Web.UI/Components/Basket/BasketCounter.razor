@inject BasketStateService BasketStateService

@if (itemCount > 0)
{
    <a href="/basket" class="btn btn-outline-light">
        <span>ðŸ›’ Sepet (@itemCount)</span>
    </a>
}

@implements IDisposable

@code {
    private int itemCount = 0;

    protected override void OnInitialized()
    {
        itemCount = BasketStateService.ItemCount;
        BasketStateService.OnItemCountChanged += UpdateItemCount;
    }

    private void UpdateItemCount()
    {
        itemCount = BasketStateService.ItemCount;
        InvokeAsync(StateHasChanged);
    }

    public void Dispose()
    {
        BasketStateService.OnItemCountChanged -= UpdateItemCount;
    }
}

